(this.webpackJsonpintrasearch_ui=this.webpackJsonpintrasearch_ui||[]).push([[0],{387:function(e,t,n){e.exports=n(444)},439:function(e,t,n){},441:function(e,t,n){},442:function(e,t,n){},443:function(e,t,n){},444:function(e,t,n){"use strict";n.r(t);n(103),n(113),n(114),n(115),n(116),n(117),n(118),n(119),n(120),n(121),n(122),n(123),n(124),n(125),n(126),n(163),n(165),n(166),n(167),n(168),n(169),n(170),n(172),n(173),n(130),n(177),n(178),n(77),n(182),n(183),n(185),n(186),n(187),n(188),n(189),n(190),n(191),n(192),n(193),n(194),n(195),n(196),n(197),n(198),n(200),n(201),n(202),n(203),n(204),n(205),n(206),n(137),n(207),n(209),n(211),n(212),n(213),n(214),n(215),n(216),n(217),n(218),n(219),n(220),n(221),n(222),n(223),n(224),n(225),n(139),n(226),n(227),n(228),n(229),n(231),n(232),n(233),n(234),n(235),n(237),n(239),n(241),n(242),n(244),n(245),n(246),n(247),n(248),n(250),n(251),n(252),n(253),n(254),n(255),n(256),n(258),n(259),n(260),n(261),n(262),n(263),n(264),n(265),n(266),n(140),n(267),n(268),n(269),n(270),n(276),n(277),n(278),n(279),n(280),n(281),n(282),n(283),n(284),n(285),n(286),n(287),n(288),n(289),n(290),n(291),n(292),n(293),n(294),n(295),n(296),n(297),n(96),n(298),n(299),n(301),n(302),n(303),n(304),n(305),n(306),n(307),n(308),n(309),n(310),n(311),n(312),n(313),n(314),n(315),n(316),n(317),n(318),n(319),n(320),n(321),n(322),n(323),n(324),n(327),n(328),n(329),n(330),n(331),n(332),n(333),n(334),n(335),n(336),n(337),n(338),n(339),n(340),n(341),n(342),n(343),n(344),n(345),n(346),n(347),n(348),n(349),n(350),n(351),n(352),n(353),n(354),n(355),n(356),n(357),n(358),n(359),n(360),n(362),n(363),n(365),n(366),n(367),n(368),n(370),n(148),n(400),n(408),n(372);var a=n(0),r=n.n(a),s=n(100),o=n.n(s),c=n(445),i=n(35),u=n(54),l=n(380),h=n(37),p=n(102),g=n(49),f=n(50),m=n(52),d=n(51),E=n(64),v=n(53),y=n(385),b=n(14),O=n(65),j=n.n(O),S=n(81),k=n(381);function C(e){var t=b.parse(e),n=(t.q,Object(k.a)(t,["q"])),a={};return""!==Object.keys(n).toString()&&Object.entries(n).forEach((function(e){var t=Object(S.a)(e,2),n=t[0],r=t[1];return a[n]=r.split(",")})),a}var T=function(e,t,n){var a=function(e,t,n){var a=C(n);return a[e]&&a[e].includes(t)?a[e]=a[e].filter((function(e){return e!==t})):a[e]?a[e].push(t):a[e]=[t],0===a[e].length&&delete a[e],a}(e,t,n);return function(t){t({type:"LOADING_RESULTS"});var r=b.stringify(a,{arrayFormat:"comma"}),s=encodeURIComponent(b.parse(n).q),o="q=".concat(s,"&").concat(r);return ee.push({search:o}),N("".concat(j.a.url,"?").concat(o,"&size=10&offset=0")).then((function(e){return e.json()})).then((function(n){return t(_(o,n,e))}))}},_=function(e,t,n){return function(a){var r=[];["trade_topics","industries","countries","types"].forEach((function(t){t===n&&Object.keys(C(e))!==[]&&C(e)[t]||r.push(t)})),a({type:"FETCH_WITH_FILTERS",response:t}),r.forEach((function(n){var r=[];C(e)[n]&&(r=C(e)[n].map((function(e){return{value:e}}))),a({type:"UPDATE_SOME_AGGREGATIONS",aggregations:t.aggregations,aggregation:n,existingFilters:r})}))}},w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return ee.push({search:e}),function(n){return n({type:"RELOADING_SAME_QUERY"}),N("".concat(j.a.url).concat(e,"&size=10&offset=").concat(10*(t-1))).then((function(e){return e.json()})).then((function(e){return n({type:"FETCH_NEW_QUERY",response:e})}))}},N=function(e){return fetch(e,{headers:{"subscription-key":j.a.accessToken,"Cache-Control":"no-cache"}})},A=n(382),q=n.n(A),P=n(383),I=n.n(P);n(438),n(439);function R(e){return e?function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}(e.replace(/[\s\r\n]+/g," ")):null}var U=Object(c.c)((function(e){return r.a.createElement("div",{className:"ResultsList col-2of3"},r.a.createElement("p",{className:"totalMessage"},r.a.createElement("strong",null,e.total)," results"),e.results.map((function(e){return r.a.createElement("div",{className:"anItem",key:e.id},r.a.createElement("a",{href:e.link},e.title),r.a.createElement("p",null,R(e.summary)))})))})),F=n(386),D=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={isChecked:!1},n.handleToggleFilter=n.handleToggleFilter.bind(Object(E.a)(n)),n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"handleToggleFilter",value:function(e){var t=this,n=e.target,a=n.name,r=n.value;this.setState({isChecked:!this.state.isChecked},(function(){t.props.toggleFilter(a,r,t.props.location.search)}))}},{key:"componentDidMount",value:function(){C(this.props.location.search)[this.props.category]&&(C(this.props.location.search)[this.props.category].includes(this.props.item)?this.setState({isChecked:!0}):this.setState({isChecked:!1}))}},{key:"componentDidUpdate",value:function(e,t){b.parse(this.props.location.search).q!==b.parse(e.location.search).q?this.setState({isChecked:!1}):this.props.uniqStr!==e.uniqStr&&this.setState({isChecked:!1})}},{key:"snakeToTitleCase",value:function(e){return e.replace(/([_][a-z])/gi,(function(e){return e.toUpperCase().replace("_"," ")})).replace(/(^[a-z]{1})/gi,(function(e){return e.toUpperCase()}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.key,a=t.category,s=t.item;return r.a.createElement("label",{key:n},r.a.createElement("input",{type:"checkbox",name:a,value:s,key:n,onChange:function(t){return e.handleToggleFilter(t)},checked:this.state.isChecked})," ","types"===a?this.snakeToTitleCase(s):s)}}]),t}(a.Component),Q=Object(c.c)(Object(i.b)(null,(function(e){return{toggleFilter:function(t,n,a){return e(T(t,n,a))}}}))(D));n(378);var G=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={showAll:!1},n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"resetToggle",value:function(){this.setState({showAll:!1})}},{key:"componentDidUpdate",value:function(e,t){b.parse(this.props.location.search).q!==b.parse(e.location.search).q&&this.resetToggle()}},{key:"toggleShowAll",value:function(e){e.preventDefault(),this.setState({showAll:!this.state.showAll})}},{key:"toggleShowButton",value:function(e){var t=this,n=this.state.showAll?"- Show Less":"+ Show More";return e<=this.props.limit?null:r.a.createElement("button",{onClick:function(e){return t.toggleShowAll(e)},className:"toggleShow"},n)}},{key:"render",value:function(){var e=this,t=this.props.items.sort((function(e,t){return e.value>t.value?1:-1})).map((function(e){return e.value})),n=Object(F.a)(new Set(t));return 0===n.length?null:r.a.createElement("details",{className:"FilterCategory",open:!0},r.a.createElement("summary",{id:L[this.props.category]},L[this.props.category]),n.length>this.props.limit&&!this.state.showAll?n.slice(0,this.props.limit).map((function(t,n){return r.a.createElement(Q,{key:t,category:e.props.category,item:t,uniqStr:e.props.uniqStr})})):n.map((function(t,n){return r.a.createElement(Q,{key:t,category:e.props.category,item:t,uniqStr:e.props.uniqStr})})),this.toggleShowButton(n.length))}}]),t}(a.Component),x=Object(c.c)(G),L={trade_topics:"Trade Topics",industries:"Industries",countries:"Countries",types:"Type"};n(441);n(378);var M=Object(c.c)(Object(i.b)(null,(function(e){return{clearFilters:function(t){return e(function(e){var t=encodeURIComponent(e);return ee.push({search:"q=".concat(t)}),function(e){return N("".concat(j.a.url,"?q=").concat(t,"&size=10&offset=0")).then((function(e){return e.json()})).then((function(t){return e({type:"FETCH_NEW_QUERY",response:t})}))}}(t))}}}))((function(e){var t={trade_topics:1,types:2,industries:3,countries:4},n=Object(a.useState)(0),s=Object(S.a)(n,2),o=s[0],c=s[1];return r.a.createElement("div",{className:"FiltersContainer col-3"},e.aggregations!=={}?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("h2",null,"Filter Results"),r.a.createElement("button",{onClick:function(){return e.clearFilters(b.parse(e.location.search).q),void c(Date.now())}},"[Clear All]")),function(){var n=[];return Object.entries(e.aggregations).forEach((function(e){var t=Object(S.a)(e,2),a=t[0];return t[1],n.push(a)})),n.sort((function(e,n){return t[e]>t[n]?1:-1}))}().map((function(t,n){if(e.aggregations[t].length){var a=function(e,t){return"types"===e?t.filter((function(e){return"market_intelligence"===e.value})):t}(t,e.aggregations[t]);return r.a.createElement(x,{category:t,key:n,items:a,limit:5,uniqStr:o})}}))):null)}))),H=(n(442),function(e){function t(){var e,n;Object(g.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).getQueryTerm=function(){return b.parse(n.props.location.search).q},n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"maxTotal",value:function(){return this.props.resultState.total>1e3?1e3:this.props.resultState.total}},{key:"handlePageChange",value:function(e){this.props.fetchNewPage(this.props.location.search,e)}},{key:"componentDidMount",value:function(){this.props.fetchNewQuery(this.props.location.search)}},{key:"componentDidUpdate",value:function(e,t){b.parse(this.props.location.search).q!==b.parse(e.location.search).q&&this.props.fetchNewQuery(this.props.location.search)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"ResultsContainer"},r.a.createElement(M,{aggregations:this.props.resultState.aggregations}),r.a.createElement(I.a,{type:"text",showLoadingAnimation:!0,ready:!this.props.resultState.loading,rows:6,style:{width:"60vw",margin:"2em 0 0.5em 1em"},color:"#E0E0E0"},r.a.createElement(U,{searchQuery:this.getQueryTerm(),total:this.props.resultState.total,results:this.props.resultState.results})),this.props.resultState.total>0?r.a.createElement(q.a,{activePage:this.props.resultState.activePage,totalItemsCount:this.maxTotal(),itemsCountPerPage:10,firstPageText:"<<",prevPageText:"<",nextPageText:">",lastPageText:">>",onChange:function(t){return e.handlePageChange(t)}}):null)}}]),t}(a.Component)),W=H=Object(c.c)(Object(i.b)((function(e){return{resultState:e.resultState}}),(function(e){return{fetchNewQuery:function(t){return e(w(t))},fetchNewPage:function(t,n){return e(function(e,t){return function(n){return n({type:"UPDATE_PAGE_NUMBER",pageNumber:t}),N("".concat(j.a.url).concat(e,"&size=10&offset=").concat(10*(t-1))).then((function(e){return e.json()})).then((function(e){return n({type:"FETCH_NEW_PAGE",response:e})}))}}(t,n))}}}))(H)),z=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(m.a)(this,Object(d.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault();var t=encodeURIComponent(n.state.searchQuery);b.parse(n.props.location.search).q===n.state.searchQuery?n.props.fetchNewQuery("?q=".concat(t)):n.props.history.push({search:"q=".concat(t)})},n.state={searchQuery:""},n.handleChangeInput=n.handleChangeInput.bind(Object(E.a)(n)),n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"handleChangeInput",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(p.a)({},n,a))}},{key:"render",value:function(){var e=this,t=b.parse(this.props.location.search),n=t.q;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},n?r.a.createElement("p",{className:"searchMessage"},"Search Results for ",r.a.createElement("strong",{className:"searchMessageKeyword"},n)):null,r.a.createElement("input",{type:"text",name:"searchQuery","aria-label":"Enter search query",placeholder:"Enter search query",value:this.state.searchQuery,onChange:function(t){return e.handleChangeInput(t)}}),r.a.createElement("button",{type:"submit","aria-label":"submit"},r.a.createElement(y.a,{size:"2em"}))),n?r.a.createElement(W,{searchQuery:t}):null)}}]),t}(a.Component),B=Object(c.c)(Object(i.b)((function(e){return{resultState:e.resultState}}),(function(e){return{fetchNewQuery:function(t){return e(w(t))}}}))(z));n(443);var Y=Object(c.c)((function(){return r.a.createElement("div",{className:"App"},r.a.createElement(c.a,{path:"/:query?",render:function(e){return r.a.createElement(B,Object.assign({},e,{location:e.location}))}}))})),J=n(38),X={total:0,offset:0,activePage:1,results:[],aggregations:{},loading:!1},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RELOADING_SAME_QUERY":return Object(J.a)({},e,{loading:!0,aggregations:{},activePage:1});case"LOADING_RESULTS":return Object(J.a)({},e,{loading:!0,activePage:1});case"FETCH_NEW_QUERY":return Object(J.a)({},e,{loading:!1,total:t.response.total,offset:t.response.offset,results:t.response.results,aggregations:t.response.aggregations,activePage:1});case"FETCH_WITH_FILTERS":return Object(J.a)({},e,{loading:!1,total:t.response.total,offset:t.response.offset,results:t.response.results});case"UPDATE_SOME_AGGREGATIONS":return e.aggregations[t.aggregation]=t.aggregations[t.aggregation],Object(J.a)({},e,{aggregations:Object(J.a)({},e.aggregations)});case"UPDATE_ALL_AGGREGATIONS":return Object(J.a)({},e,{aggregations:t.aggregations});case"UPDATE_PAGE_NUMBER":return Object(J.a)({},e,{loading:!0,activePage:t.pageNumber});case"FETCH_NEW_PAGE":return Object(J.a)({},e,{loading:!1,offset:t.response.offset,results:t.response.results});default:return e}},V=Object(u.c)({resultState:K});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n.d(t,"history",(function(){return ee}));var $=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d,Z=Object(u.e)(V,$(Object(u.a)(l.a))),ee=Object(h.a)();function te(e){o.a.render(r.a.createElement(i.a,{store:Z},r.a.createElement(c.b,{history:ee},r.a.createElement(Y,null))),document.getElementById(e))}t.default=te;window.Explorer={renderIntrasearchUI:te},"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},65:function(e,t,n){e.exports={url:"https://data.trade.gov/web_documents/v1/search",accessToken:"06800b3aa7914d61a9e770d671eda3c8"}}},[[387,1,2]]]);
//# sourceMappingURL=0.intrasearch_ui.js.map